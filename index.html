<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Book & Notes Vault</title>
    <link rel="stylesheet" href="styles/main.css" />
    <link rel="stylesheet" href="styles/components.css" />
    <link rel="stylesheet" href="styles/themes.css" />
    <link rel="stylesheet" href="styles/library.css" />
    <link rel="stylesheet" href="styles/dashboard.css" />
    <link rel="stylesheet" href="styles/responsive.css" />
</head>
<body>
    <script>
        // Initialize theme immediately to prevent flash
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-theme', savedTheme);
    </script>
    <!-- Skip link for keyboard users -->
    <a class="skip-link visually-hidden" href="#main">Skip to content</a>

    <header>
        <div class="header-content">
            <h1> Book &amp; Notes Vault</h1>
            <nav aria-label="Primary navigation">
                <ul class="nav-list">
                    <li><a href="#about" class="nav-link active" data-section="about">About</a></li>
                    <li><a href="#dashboard" class="nav-link" data-section="dashboard"> Dashboard</a></li>
                    <li><a href="#records" class="nav-link" data-section="records"> My Library</a></li>
                    <li><a href="#add-edit-form" class="nav-link" data-section="add-edit-form"> Add Book</a></li>
                    <li><a href="#settings" class="nav-link" data-section="settings"> Settings</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main id="main">
        <section id="about" class="app-section active" aria-labelledby="about-heading">
            <div class="section-header">
                <h2 id="about-heading"> About Book & Notes Vault</h2>
                <p class="section-description">Professional digital library management for book enthusiasts</p>
            </div>
            
            <!-- Hero Section -->
            <div class="about-hero">
                <div class="hero-content">
                    <h3>Transform Your Reading Experience</h3>
                    <p>Book & Notes Vault is a comprehensive digital library management system designed to help avid readers organize, track, and analyze their personal book collections with professional-grade tools and insights.</p>
                    <div class="hero-stats">
                        <div class="hero-stat">
                            <span class="stat-number">12</span>
                            <span class="stat-label">Books Cataloged</span>
                        </div>
                        <div class="hero-stat">
                            <span class="stat-number">6,265</span>
                            <span class="stat-label">Pages Tracked</span>
                        </div>
                        <div class="hero-stat">
                            <span class="stat-number">11</span>
                            <span class="stat-label">Categories</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="about-content">
                <!-- Core Features -->
                <div class="about-card featured-card">
                    <div class="card-icon"></div>
                    <h3>Core Purpose</h3>
                    <p>Designed for serious readers who want to maintain detailed records of their literary journey. Track reading progress, organize by categories, set goals, and gain insights into your reading habits with powerful analytics.</p>
                    <div class="feature-highlights">
                        <span class="highlight"> Analytics</span>
                        <span class="highlight"> Goal Tracking</span>
                        <span class="highlight"> Responsive</span>
                    </div>
                </div>

                <!-- Key Features -->
                <div class="about-card">
                    <div class="card-icon"></div>
                    <h3>Key Features</h3>
                    <div class="features-grid">
                        <div class="feature-item">
                            <span class="feature-icon"></span>
                            <div class="feature-text">
                                <strong>Smart Cataloging</strong>
                                <p>Organize books with detailed metadata including author, pages, categories, and dates</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon"></span>
                            <div class="feature-text">
                                <strong>Advanced Search</strong>
                                <p>Powerful regex-based search with real-time filtering and sorting capabilities</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon"></span>
                            <div class="feature-text">
                                <strong>Progress Tracking</strong>
                                <p>Monitor reading goals, track monthly/yearly progress, and view detailed statistics</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon"></span>
                            <div class="feature-text">
                                <strong>Data Management</strong>
                                <p>Import/export capabilities with JSON format and sample data loading</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Technical Specifications -->
                <div class="about-card">
                    <div class="card-icon"></div>
                    <h3>Technical Excellence</h3>
                    <div class="tech-specs">
                        <div class="spec-category">
                            <h4>Frontend Technologies</h4>
                            <div class="tech-tags">
                                <span class="tech-tag">HTML5</span>
                                <span class="tech-tag">CSS3</span>
                                <span class="tech-tag">JavaScript ES6+</span>
                                <span class="tech-tag">Responsive Design</span>
                            </div>
                        </div>
                        <div class="spec-category">
                            <h4>Key Capabilities</h4>
                            <div class="tech-tags">
                                <span class="tech-tag">Regex Validation</span>
                                <span class="tech-tag">LocalStorage</span>
                                <span class="tech-tag">ARIA Accessibility</span>
                                <span class="tech-tag">Theme Support</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Developer Information -->
                <div class="about-card contact-card">
                    <div class="card-icon"></div>
                    <h3>Developer</h3>
                    <div class="developer-info">
                        <div class="developer-details">
                            <div class="developer-name">
                                <strong>Divine Mutesi</strong>
                                <span class="developer-title">Full-Stack Developer</span>
                            </div>
                            <p class="developer-bio">Passionate about creating intuitive digital solutions for book lovers and reading enthusiasts. Specialized in responsive web applications with focus on user experience and accessibility.</p>
                        </div>
                        <div class="contact-links">
                            <a href="mailto:d.mutesi1@alustudent.com" class="contact-link email-link">
                                <span class="link-icon"></span>
                                <span class="link-text">d.mutesi1@alustudent.com</span>
                            </a>
                            <a href="https://github.com/divine150-coder" target="_blank" rel="noopener" class="contact-link github-link">
                                <span class="link-icon"></span>
                                <span class="link-text">GitHub Profile</span>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Quick Start Guide -->
                <div class="about-card guide-card">
                    <div class="card-icon"></div>
                    <h3>Quick Start Guide</h3>
                    <div class="quick-steps">
                        <div class="step">
                            <span class="step-number">1</span>
                            <div class="step-content">
                                <strong>Load Sample Data</strong>
                                <p>Go to Settings â†’ Load Sample Data to populate with 12 diverse books</p>
                            </div>
                        </div>
                        <div class="step">
                            <span class="step-number">2</span>
                            <div class="step-content">
                                <strong>Explore Dashboard</strong>
                                <p>View reading statistics, progress tracking, and interactive charts</p>
                            </div>
                        </div>
                        <div class="step">
                            <span class="step-number">3</span>
                            <div class="step-content">
                                <strong>Add Your Books</strong>
                                <p>Use the Add Book form to catalog your personal collection</p>
                            </div>
                        </div>
                        <div class="step">
                            <span class="step-number">4</span>
                            <div class="step-content">
                                <strong>Set Reading Goals</strong>
                                <p>Configure monthly page targets and yearly book goals in Dashboard</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="dashboard" class="app-section" aria-labelledby="dashboard-heading">
            <div class="section-header">
                <h2 id="dashboard-heading">Dashboard Overview</h2>
                <p class="section-description">Track your reading progress and library statistics</p>
            </div>
            
            <!-- Main Stats Grid -->
            <div id="stats-dashboard" class="stats-grid" role="status" aria-live="polite">
                <div class="stat-card">
                    <div class="stat-icon"></div>
                    <div class="stat-number">12</div>
                    <div class="stat-label">Total Books</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon"></div>
                    <div class="stat-number">6,265</div>
                    <div class="stat-label">Total Pages</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon"></div>
                    <div class="stat-number">522</div>
                    <div class="stat-label">Avg Pages/Book</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon"></div>
                    <div class="stat-number">Classic</div>
                    <div class="stat-label">Top Category</div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions">
                <button class="action-btn" onclick="navigation.showSection('add-edit-form')">
                    <span class="action-icon"></span>
                    <span class="action-text">Add New Book</span>
                </button>
                <button class="action-btn" onclick="navigation.showSection('records')">
                    <span class="action-icon"></span>
                    <span class="action-text">View Library</span>
                </button>
                <button class="action-btn" onclick="document.getElementById('export-data').click()">
                    <span class="action-icon"></span>
                    <span class="action-text">Export Data</span>
                </button>
            </div>

            <!-- Dashboard Grid Layout -->
            <div class="dashboard-grid">
                <!-- Reading Progress -->
                <div class="dashboard-card priority-card">
                    <div class="card-header">
                        <h3> Your Reading Journey</h3>
                        <span class="help-tip" title="Track your monthly and yearly reading progress"></span>
                    </div>
                    <div class="progress-stats">
                        <div class="progress-item">
                            <div class="progress-header">
                                <span class="progress-label">This Month</span>
                                <span class="progress-percentage">70%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 70%"></div>
                            </div>
                            <span class="progress-value">1,405 of 2,000 pages read</span>
                        </div>
                        <div class="progress-item">
                            <div class="progress-header">
                                <span class="progress-label">This Year</span>
                                <span class="progress-percentage">42%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 42%"></div>
                            </div>
                            <span class="progress-value">6,265 of 15,000 pages read</span>
                        </div>
                    </div>
                </div>

                <!-- Interactive Top Categories -->
                <div class="dashboard-card">
                    <div class="card-header">
                        <h3>Top Categories</h3>
                        <span class="help-tip" title="Click to filter library by category"></span>
                    </div>
                    <div class="category-grid" id="category-breakdown">
                        <div class="category-card" onclick="filterByCategory('Classic')" role="button" tabindex="0" aria-label="Filter library by Classic books">
                            <div class="category-icon"></div>
                            <div class="category-info">
                                <div class="category-name">Classic</div>
                                <div class="category-stats">2 books â€¢ 1,405 pages</div>
                            </div>
                        </div>
                        <div class="category-card" onclick="filterByCategory('Computer-Science')" role="button" tabindex="0" aria-label="Filter library by Computer Science books">
                            <div class="category-icon"></div>
                            <div class="category-info">
                                <div class="category-name">Computer-Science</div>
                                <div class="category-stats">1 book â€¢ 3,168 pages</div>
                            </div>
                        </div>
                        <div class="category-card" onclick="filterByCategory('Science-Fiction')" role="button" tabindex="0" aria-label="Filter library by Science Fiction books">
                            <div class="category-icon"></div>
                            <div class="category-info">
                                <div class="category-name">Science-Fiction</div>
                                <div class="category-stats">1 book â€¢ 688 pages</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Interactive Recent Books -->
                <div class="dashboard-card">
                    <div class="card-header">
                        <h3> Recently Added</h3>
                        <button class="view-all-btn" onclick="navigation.showSection('records')" aria-label="View all books in library">View All</button>
                    </div>
                    <div class="recent-books" id="recent-books-list">
                        <div class="book-item" onclick="navigation.showSection('records')" role="button" tabindex="0" aria-label="View Mindfulness in Plain English details">
                            <div class="book-cover"></div>
                            <div class="book-info">
                                <div class="book-title">Mindfulness in Plain English</div>
                                <div class="book-meta">224 pages â€¢ Dec 12, 2024</div>
                            </div>
                        </div>
                        <div class="book-item" onclick="navigation.showSection('records')" role="button" tabindex="0" aria-label="View The Quantum Universe details">
                            <div class="book-cover"></div>
                            <div class="book-info">
                                <div class="book-title">The Quantum Universe</div>
                                <div class="book-meta">255 pages â€¢ Dec 11, 2024</div>
                            </div>
                        </div>
                        <div class="book-item" onclick="navigation.showSection('records')" role="button" tabindex="0" aria-label="View Sapiens details">
                            <div class="book-cover"></div>
                            <div class="book-info">
                                <div class="book-title">Sapiens: A Brief History</div>
                                <div class="book-meta">443 pages â€¢ Dec 10, 2024</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Interactive Reading Goals -->
                <div class="dashboard-card">
                    <div class="card-header">
                        <h3> Reading Goals</h3>
                        <span class="help-tip" title="Set and track your reading targets">?</span>
                    </div>
                    <div class="goals-interactive">
                        <div class="goal-item">
                            <label for="pages-target">Monthly Pages Target:</label>
                            <input type="number" id="pages-target" min="1" value="2000" placeholder="1000" />
                            <div id="target-status" role="status" aria-live="assertive" class="target-status">595 pages remaining to reach target</div>
                        </div>
                        <div class="goal-item">
                            <label for="books-target">Yearly Books Target:</label>
                            <input type="number" id="books-target" min="1" value="24" placeholder="24" />
                            <div class="goal-status in-progress"> 12/24 Books (50%)</div>
                        </div>
                    </div>
                </div>

                <!-- Fun Facts -->
                <div class="dashboard-card">
                    <div class="card-header">
                        <h3> Fun Facts</h3>
                        <span class="help-tip" title="Interesting insights about your library"></span>
                    </div>
                    <div class="fun-facts">
                        <div class="fact-item">
                            <span class="fact-emoji"></span>
                            <span class="fact-text">Your biggest book has <strong>3,168 pages</strong></span>
                        </div>
                        <div class="fact-item">
                            <span class="fact-emoji"></span>
                            <span class="fact-text">You've read <strong>6,265 pages</strong> total</span>
                        </div>
                        <div class="fact-item">
                            <span class="fact-emoji"></span>
                            <span class="fact-text">Most active month: <strong>December</strong></span>
                        </div>
                        <div class="fact-item">
                            <span class="fact-emoji"></span>
                            <span class="fact-text">You love <strong>Classic</strong> books most</span>
                        </div>
                    </div>
                </div>

                <!-- Simple Chart -->
                <div class="dashboard-card chart-card">
                    <div class="card-header">
                        <h3> Reading Activity</h3>
                        <span class="help-tip" title="Books added each month"></span>
                    </div>
                    <div class="simple-chart">
                        <div class="chart-item">
                            <div class="chart-bar" style="height: 85%"></div>
                            <span class="chart-label">Dec</span>
                            <span class="chart-value">12</span>
                        </div>
                        <div class="chart-item">
                            <div class="chart-bar" style="height: 25%"></div>
                            <span class="chart-label">Nov</span>
                            <span class="chart-value">3</span>
                        </div>
                        <div class="chart-item">
                            <div class="chart-bar" style="height: 40%"></div>
                            <span class="chart-label">Oct</span>
                            <span class="chart-value">5</span>
                        </div>
                        <div class="chart-item">
                            <div class="chart-bar" style="height: 60%"></div>
                            <span class="chart-label">Sep</span>
                            <span class="chart-value">7</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="records" class="app-section" aria-labelledby="records-heading">
            <div class="section-header">
                <h2 id="records-heading"> My Library</h2>
                <p class="section-description">Browse and manage your book collection</p>
            </div>

            <div class="library-controls">
                <div class="search-section">
                    <label for="search-input"> Search Books</label>
                    <input id="search-input" type="text" placeholder="Search by title, author, or tag..." />
                </div>
                <div class="filter-section">
                    <label for="tag-filter"> Filter by Category</label>
                    <select id="tag-filter">
                        <option value="">All Categories</option>
                        <option value="Classic">Classic</option>
                        <option value="Computer-Science">Computer-Science</option>
                        <option value="Dystopian">Dystopian</option>
                        <option value="Fantasy">Fantasy</option>
                        <option value="History">History</option>
                        <option value="Minimal">Minimal</option>
                        <option value="Programming">Programming</option>
                        <option value="Romance">Romance</option>
                        <option value="Science">Science</option>
                        <option value="Science-Fiction">Science-Fiction</option>
                        <option value="Self-Help">Self-Help</option>
                    </select>
                </div>
            </div>

            <div class="table-controls">
                <div id="search-status" role="status" aria-live="polite">Showing all records</div>
                <div class="sort-controls">
                    <label for="sort-select">Sort by:</label>
                    <select id="sort-select">
                        <option value="dateAdded-desc">Date Added (Newest)</option>
                        <option value="dateAdded-asc">Date Added (Oldest)</option>
                        <option value="title-asc">Title (A-Z)</option>
                        <option value="title-desc">Title (Z-A)</option>
                        <option value="pages-desc">Pages (High-Low)</option>
                        <option value="pages-asc">Pages (Low-High)</option>
                    </select>
                </div>
            </div>

            <!-- Desktop Table View -->
            <table class="records-table" role="table" aria-describedby="search-help">
                <thead>
                    <tr>
                        <th scope="col">Title</th>
                        <th scope="col">Author</th>
                        <th scope="col">Pages</th>
                        <th scope="col">Tag</th>
                        <th scope="col">Date Added</th>
                        <th scope="col">Actions</th>
                    </tr>
                </thead>
                <tbody id="records-table">
                    <!-- Records will be inserted here -->
                </tbody>
            </table>
            
            <!-- Mobile Card View -->
            <div class="records-mobile" id="records-mobile" role="region" aria-label="Book records in card format">
                <!-- Mobile cards will be inserted here -->
            </div>
            
            <div id="search-help" class="visually-hidden">
                Search supports basic text matching. Use quotes for exact phrases. Press Ctrl+F to focus search.
            </div>
        </section>

        <section id="add-edit-form" class="app-section" aria-labelledby="add-edit-heading">
            <div class="section-header">
                <h2 id="add-edit-heading">Add New Book</h2>
                <p class="section-description">Add a new book to your personal library</p>
            </div>

            <div class="form-container">
                <form id="add-form" class="book-form" aria-describedby="add-help">
                    <div class="form-group">
                        <label for="title">Book Title</label>
                        <input id="title" name="title" type="text" required autocomplete="off" placeholder="Enter book title" />
                    </div>

                    <div class="form-group">
                        <label for="author">Author</label>
                        <input id="author" name="author" type="text" required autocomplete="off" placeholder="Enter author name" />
                    </div>

                    <div class="form-group">
                        <label for="tag">Tag/Category</label>
                        <input id="tag" name="tag" type="text" required placeholder="e.g., Fiction, Science, Biography" />
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="pages">Pages</label>
                            <input id="pages" name="pages" type="number" min="1" required placeholder="0" />
                        </div>
                        <div class="form-group">
                            <label for="date-added">Date Added</label>
                            <input id="date-added" name="dateAdded" type="date" required />
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary"> Save Book</button>
                    </div>
                <div id="add-help" class="visually-hidden">
                    Title &amp; author: no leading/trailing spaces. Pages: positive integer. Dates are YYYY-MM-DD.
                </div>
            </form>

                <form id="edit-form" class="book-form edit-form" style="display:none;" aria-hidden="true">
                    <input id="edit-id" name="id" type="hidden" />
                    <div class="form-group">
                        <label for="edit-title">Book Title</label>
                        <input id="edit-title" name="title" type="text" required />
                    </div>
                    <div class="form-group">
                        <label for="edit-author">Author</label>
                        <input id="edit-author" name="author" type="text" required />
                    </div>
                    <div class="form-group">
                        <label for="edit-tag">Tag/Category</label>
                        <input id="edit-tag" name="tag" type="text" required />
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="edit-pages">Pages</label>
                            <input id="edit-pages" name="pages" type="number" min="1" required />
                        </div>
                        <div class="form-group">
                            <label for="edit-date-added">Date Added</label>
                            <input id="edit-date-added" name="dateAdded" type="date" required />
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary"> Update Book</button>
                        <button id="cancel-edit" type="button" class="btn btn-secondary"> Cancel</button>
                    </div>
                </form>
            </div>
        </section>

        <section id="settings" class="app-section" aria-labelledby="settings-heading">
            <div class="section-header">
                <h2 id="settings-heading"> Settings</h2>
                <p class="section-description">Manage your preferences and data</p>
            </div>
            <div class="settings-grid">
                <div class="setting-card">
                    <h3>Data Management</h3>
                    <div class="setting-actions">
                        <button class="btn btn-outline" id="export-data"> Export Data</button>
                        <button class="btn btn-outline" id="import-data"> Import Data</button>
                        <button class="btn btn-outline" id="load-seed"> Load Sample Data</button>
                        <input type="file" id="import-file" accept=".json" style="display: none;">
                    </div>
                </div>
                <div class="setting-card">
                    <h3>Display Options</h3>
                    <div class="setting-item">
                        <label for="theme-select">Theme</label>
                        <select id="theme-select" class="form-control">
                            <option value="light">Light</option>
                            <option value="dark">Dark</option>
                        </select>
                    </div>
                </div>
                <div class="setting-card">
                    <h3>Units & Conversion</h3>
                    <div class="setting-item">
                        <label for="page-unit">Page Display Unit</label>
                        <select id="page-unit" class="form-control">
                            <option value="pages">Pages</option>
                            <option value="chapters">Chapters (Ã·20)</option>
                            <option value="hours">Reading Hours (Ã·50)</option>
                        </select>
                    </div>
                    <div class="conversion-display">
                        <p id="conversion-info">1 page = 1 page</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 Book &amp; Notes Vault. All rights reserved. <a href="mailto:d.mutesi1@alustudent.com">d.mutesi1@alustudent.com</a> â€¢ <a href="https://github.com/divine150-coder" target="_blank" rel="noopener">GitHub</a></p>
    </footer>

    <script src="scripts/storage.js"></script>
    <script src="scripts/state.js"></script>
    <script src="scripts/ui.js"></script>
    <script src="scripts/validators.js"></script>
    <script src="scripts/search.js"></script>
    <script src="scripts/navigation.js"></script>
    <script src="scripts/theme.js"></script>
    <script src="scripts/book-manager.js"></script>
    <script>
        // Make navigation globally available
        window.navigation = {
            showSection: function(targetSection) {
                const sections = document.querySelectorAll('.app-section');
                const navLinks = document.querySelectorAll('.nav-link');
                
                sections.forEach(section => section.classList.remove('active'));
                
                const target = document.getElementById(targetSection);
                if (target) target.classList.add('active');
                
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.dataset.section === targetSection) {
                        link.classList.add('active');
                    }
                });
                
                window.location.hash = targetSection;
            }
        };
        
        function filterByCategory(category) {
            navigation.showSection('records');
            setTimeout(() => {
                const tagFilter = document.getElementById('tag-filter');
                if (tagFilter) {
                    tagFilter.value = category;
                    filterAndSearch();
                }
            }, 200);
        }
        
        // All books data
        const allBooks = [
            {"id": "book_0001", "title": "The Great Gatsby", "author": "F. Scott Fitzgerald", "pages": 180, "tag": "Classic", "dateAdded": "2024-12-01"},
            {"id": "book_0002", "title": "1984", "author": "George Orwell", "pages": 328, "tag": "Dystopian", "dateAdded": "2024-12-02"},
            {"id": "book_0003", "title": "A", "author": "Single Letter", "pages": 1, "tag": "Minimal", "dateAdded": "2000-01-01"},
            {"id": "book_0004", "title": "War and Peace", "author": "Leo Tolstoy", "pages": 1225, "tag": "Classic", "dateAdded": "2024-12-31"},
            {"id": "book_0005", "title": "The Hobbit", "author": "J.R.R. Tolkien", "pages": 310, "tag": "Fantasy", "dateAdded": "2024-12-05"},
            {"id": "book_0006", "title": "Dune Dune Chronicles", "author": "Frank Herbert", "pages": 688, "tag": "Science-Fiction", "dateAdded": "2024-02-29"},
            {"id": "book_0007", "title": "JavaScript: The Good Parts", "author": "Douglas Crockford", "pages": 153, "tag": "Programming", "dateAdded": "2024-12-07"},
            {"id": "book_0008", "title": "The Art of Computer Programming", "author": "Donald Knuth", "pages": 3168, "tag": "Computer-Science", "dateAdded": "2024-12-08"},
            {"id": "book_0009", "title": "Pride and Prejudice", "author": "Jane Austen", "pages": 279, "tag": "Romance", "dateAdded": "2024-12-09"},
            {"id": "book_0010", "title": "Sapiens: A Brief History of Humankind", "author": "Yuval Noah Harari", "pages": 443, "tag": "History", "dateAdded": "2024-12-10"},
            {"id": "book_0011", "title": "The Quantum Universe", "author": "Brian Cox", "pages": 255, "tag": "Science", "dateAdded": "2024-12-11"},
            {"id": "book_0012", "title": "Mindfulness in Plain English", "author": "Bhante Henepola Gunaratana", "pages": 224, "tag": "Self-Help", "dateAdded": "2024-12-12"}
        ];
        
        // Render books function
        function renderBooks(books = allBooks) {
            const tbody = document.getElementById('records-table');
            const searchStatus = document.getElementById('search-status');
            
            if (!tbody) return;
            
            tbody.innerHTML = '';
            books.forEach(book => {
                const row = document.createElement('tr');
                row.classList.add('record');
                row.dataset.id = book.id;
                row.innerHTML = `
                    <td><strong>${book.title}</strong></td>
                    <td>${book.author}</td>
                    <td><span class="pages-badge">${book.pages} pages</span></td>
                    <td><span class="tag-badge">${book.tag}</span></td>
                    <td>${book.dateAdded}</td>
                    <td class="actions">
                        <button class="edit-btn" data-id="${book.id}"> Edit</button>
                        <button class="delete-btn" data-id="${book.id}"> Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
            
            // Update status
            if (searchStatus) {
                if (books.length === allBooks.length) {
                    searchStatus.textContent = 'Showing all records';
                } else {
                    searchStatus.textContent = `Showing ${books.length} of ${allBooks.length} books`;
                }
            }
        }
        
        // Filter and search function
        function filterAndSearch() {
            const searchInput = document.getElementById('search-input');
            const tagFilter = document.getElementById('tag-filter');
            
            const searchTerm = searchInput ? searchInput.value.toLowerCase().trim() : '';
            const selectedTag = tagFilter ? tagFilter.value : '';
            
            let filteredBooks = [...allBooks];
            
            // Apply search filter
            if (searchTerm) {
                filteredBooks = filteredBooks.filter(book => 
                    book.title.toLowerCase().includes(searchTerm) ||
                    book.author.toLowerCase().includes(searchTerm) ||
                    book.tag.toLowerCase().includes(searchTerm)
                );
            }
            
            // Apply tag filter
            if (selectedTag) {
                filteredBooks = filteredBooks.filter(book => book.tag === selectedTag);
            }
            
            renderBooks(filteredBooks);
        }
        
        // Sort function
        function sortBooks(field, direction) {
            const tbody = document.getElementById('records-table');
            if (!tbody) return;
            
            const rows = Array.from(tbody.querySelectorAll('tr'));
            
            rows.sort((a, b) => {
                let aVal, bVal;
                
                if (field === 'title') {
                    aVal = a.cells[0].textContent.trim();
                    bVal = b.cells[0].textContent.trim();
                } else if (field === 'author') {
                    aVal = a.cells[1].textContent.trim();
                    bVal = b.cells[1].textContent.trim();
                } else if (field === 'pages') {
                    aVal = parseInt(a.cells[2].textContent.match(/\d+/)[0]);
                    bVal = parseInt(b.cells[2].textContent.match(/\d+/)[0]);
                } else if (field === 'dateAdded') {
                    aVal = new Date(a.cells[4].textContent);
                    bVal = new Date(b.cells[4].textContent);
                }
                
                if (direction === 'asc') {
                    return aVal < bVal ? -1 : aVal > bVal ? 1 : 0;
                } else {
                    return aVal > bVal ? -1 : aVal < bVal ? 1 : 0;
                }
            });
            
            tbody.innerHTML = '';
            rows.forEach(row => tbody.appendChild(row));
        }
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                renderBooks();
                
                // Add event listeners
                const searchInput = document.getElementById('search-input');
                const tagFilter = document.getElementById('tag-filter');
                const sortSelect = document.getElementById('sort-select');
                
                if (searchInput) {
                    searchInput.addEventListener('input', filterAndSearch);
                }
                
                if (tagFilter) {
                    tagFilter.addEventListener('change', filterAndSearch);
                }
                
                if (sortSelect) {
                    sortSelect.addEventListener('change', (e) => {
                        const [field, direction] = e.target.value.split('-');
                        sortBooks(field, direction);
                    });
                }
            }, 100);
        });
    </script>
</body>
</html>
